/*
colpick Color Picker
Copyright 2013 Jose Vargas. Licensed under GPL license. Based on Stefan Petre's Color Picker www.eyecon.ro, dual licensed under the MIT and GPL licenses

For usage and examples: colpick.com/plugin
 */
!function(t){var i=function(){var i='<div class="colpick"><div class="colpick-color"><div class="colpick-color-overlay1"><div class="colpick-color-overlay2"><div class="colpick-selector-outer"><div class="colpick-selector-inner"></div></div></div></div></div><div class="colpick-hue"><div class="colpick-hue-arrs"><div class="colpick-hue-larr"></div><div class="colpick-hue-rarr"></div></div></div><div class="colpick-new-color"></div><div class="colpick-current-color"></div><div class="colpick-hex-field"><div class="colpick-field-letter">#</div><input type="text" maxlength="6" size="6" /></div><div class="colpick-rgb-r colpick-field"><div class="colpick-field-letter">R</div><input type="text" maxlength="3" size="3" /><div class="colpick-field-arrs"><div class="colpick-field-uarr"></div><div class="colpick-field-darr"></div></div></div><div class="colpick-rgb-g colpick-field"><div class="colpick-field-letter">G</div><input type="text" maxlength="3" size="3" /><div class="colpick-field-arrs"><div class="colpick-field-uarr"></div><div class="colpick-field-darr"></div></div></div><div class="colpick-rgb-b colpick-field"><div class="colpick-field-letter">B</div><input type="text" maxlength="3" size="3" /><div class="colpick-field-arrs"><div class="colpick-field-uarr"></div><div class="colpick-field-darr"></div></div></div><div class="colpick-hsb-h colpick-field"><div class="colpick-field-letter">H</div><input type="text" maxlength="3" size="3" /><div class="colpick-field-arrs"><div class="colpick-field-uarr"></div><div class="colpick-field-darr"></div></div></div><div class="colpick-hsb-s colpick-field"><div class="colpick-field-letter">S</div><input type="text" maxlength="3" size="3" /><div class="colpick-field-arrs"><div class="colpick-field-uarr"></div><div class="colpick-field-darr"></div></div></div><div class="colpick-hsb-b colpick-field"><div class="colpick-field-letter">B</div><input type="text" maxlength="3" size="3" /><div class="colpick-field-arrs"><div class="colpick-field-uarr"></div><div class="colpick-field-darr"></div></div></div><div class="colpick-submit"></div></div>',c={showEvent:"click",onShow:function(){},onBeforeShow:function(){},onHide:function(){},onChange:function(){},onSubmit:function(){},colorScheme:"light",color:"3289c7",livePreview:!0,flat:!1,layout:"full",submit:1,submitText:"OK",height:156},l=function(i,c){var e=a(i);t(c).data("colpick").fields.eq(1).val(e.r).end().eq(2).val(e.g).end().eq(3).val(e.b).end()},n=function(i,c){t(c).data("colpick").fields.eq(4).val(Math.round(i.h)).end().eq(5).val(Math.round(i.s)).end().eq(6).val(Math.round(i.b)).end()},d=function(i,c){t(c).data("colpick").fields.eq(0).val(r(i))},s=function(i,c){t(c).data("colpick").selector.css("backgroundColor","#"+r({h:i.h,s:100,b:100})),t(c).data("colpick").selectorIndic.css({left:parseInt(t(c).data("colpick").height*i.s/100,10),top:parseInt(t(c).data("colpick").height*(100-i.b)/100,10)})},p=function(i,c){t(c).data("colpick").hue.css("top",parseInt(t(c).data("colpick").height-t(c).data("colpick").height*i.h/360,10))},f=function(i,c){t(c).data("colpick").currentColor.css("backgroundColor","#"+r(i))},u=function(i,c){t(c).data("colpick").newColor.css("backgroundColor","#"+r(i))},h=function(){var i,c=t(this).parent().parent();this.parentNode.className.indexOf("-hex")>0?(c.data("colpick").color=i=e(P(this.value)),l(i,c.get(0)),n(i,c.get(0))):this.parentNode.className.indexOf("-hsb")>0?(c.data("colpick").color=i=D({h:parseInt(c.data("colpick").fields.eq(4).val(),10),s:parseInt(c.data("colpick").fields.eq(5).val(),10),b:parseInt(c.data("colpick").fields.eq(6).val(),10)}),l(i,c.get(0)),d(i,c.get(0))):(c.data("colpick").color=i=o(L({r:parseInt(c.data("colpick").fields.eq(1).val(),10),g:parseInt(c.data("colpick").fields.eq(2).val(),10),b:parseInt(c.data("colpick").fields.eq(3).val(),10)})),d(i,c.get(0)),n(i,c.get(0))),s(i,c.get(0)),p(i,c.get(0)),u(i,c.get(0)),c.data("colpick").onChange.apply(c.parent(),[i,r(i),a(i),c.data("colpick").el,0])},v=function(){t(this).parent().removeClass("colpick-focus")},k=function(){t(this).parent().parent().data("colpick").fields.parent().removeClass("colpick-focus"),t(this).parent().addClass("colpick-focus")},g=function(i){i.preventDefault?i.preventDefault():i.returnValue=!1;var c=t(this).parent().find("input").focus(),e={el:t(this).parent().addClass("colpick-slider"),max:this.parentNode.className.indexOf("-hsb-h")>0?360:this.parentNode.className.indexOf("-hsb")>0?100:255,y:i.pageY,field:c,val:parseInt(c.val(),10),preview:t(this).parent().parent().data("colpick").livePreview};t(document).mouseup(e,b),t(document).mousemove(e,m)},m=function(t){return t.data.field.val(Math.max(0,Math.min(t.data.max,parseInt(t.data.val-t.pageY+t.data.y,10)))),t.data.preview&&h.apply(t.data.field.get(0),[!0]),!1},b=function(i){return h.apply(i.data.field.get(0),[!0]),i.data.el.removeClass("colpick-slider").find("input").focus(),t(document).off("mouseup",b),t(document).off("mousemove",m),!1},w=function(i){i.preventDefault?i.preventDefault():i.returnValue=!1;var c={cal:t(this).parent(),y:t(this).offset().top};c.preview=c.cal.data("colpick").livePreview,t(document).mouseup(c,M),t(document).mousemove(c,x),h.apply(c.cal.data("colpick").fields.eq(4).val(parseInt(360*(c.cal.data("colpick").height-(i.pageY-c.y))/c.cal.data("colpick").height,10)).get(0),[c.preview])},x=function(t){return h.apply(t.data.cal.data("colpick").fields.eq(4).val(parseInt(360*(t.data.cal.data("colpick").height-Math.max(0,Math.min(t.data.cal.data("colpick").height,t.pageY-t.data.y)))/t.data.cal.data("colpick").height,10)).get(0),[t.data.preview]),!1},M=function(i){return l(i.data.cal.data("colpick").color,i.data.cal.get(0)),d(i.data.cal.data("colpick").color,i.data.cal.get(0)),t(document).off("mouseup",M),t(document).off("mousemove",x),!1},y=function(i){i.preventDefault?i.preventDefault():i.returnValue=!1;var c={cal:t(this).parent(),pos:t(this).offset()};c.preview=c.cal.data("colpick").livePreview,t(document).mouseup(c,I),t(document).mousemove(c,C),h.apply(c.cal.data("colpick").fields.eq(6).val(parseInt(100*(c.cal.data("colpick").height-(i.pageY-c.pos.top))/c.cal.data("colpick").height,10)).end().eq(5).val(parseInt(100*(i.pageX-c.pos.left)/c.cal.data("colpick").height,10)).get(0),[c.preview])},C=function(t){return h.apply(t.data.cal.data("colpick").fields.eq(6).val(parseInt(100*(t.data.cal.data("colpick").height-Math.max(0,Math.min(t.data.cal.data("colpick").height,t.pageY-t.data.pos.top)))/t.data.cal.data("colpick").height,10)).end().eq(5).val(parseInt(100*Math.max(0,Math.min(t.data.cal.data("colpick").height,t.pageX-t.data.pos.left))/t.data.cal.data("colpick").height,10)).get(0),[t.data.preview]),!1},I=function(i){return l(i.data.cal.data("colpick").color,i.data.cal.get(0)),d(i.data.cal.data("colpick").color,i.data.cal.get(0)),t(document).off("mouseup",I),t(document).off("mousemove",C),!1},q=function(){var i=t(this).parent(),c=i.data("colpick").color;i.data("colpick").origColor=c,f(c,i.get(0)),i.data("colpick").onSubmit(c,r(c),a(c),i.data("colpick").el)},S=function(i){i.stopPropagation();var c=t("#"+t(this).data("colpickId"));c.data("colpick").onBeforeShow.apply(this,[c.get(0)]);var e=t(this).offset(),o=e.top+this.offsetHeight,a=e.left,l=T();a+346>l.l+l.w&&(a-=346),c.css({left:a+"px",top:o+"px"}),0!=c.data("colpick").onShow.apply(this,[c.get(0)])&&c.show(),t("html").mousedown({cal:c},H),c.mousedown(function(t){t.stopPropagation()})},H=function(i){0!=i.data.cal.data("colpick").onHide.apply(this,[i.data.cal.get(0)])&&i.data.cal.hide(),t("html").off("mousedown",H)},T=function(){var t="CSS1Compat"==document.compatMode;return{l:window.pageXOffset||(t?document.documentElement.scrollLeft:document.body.scrollLeft),w:window.innerWidth||(t?document.documentElement.clientWidth:document.body.clientWidth)}},D=function(t){return{h:Math.min(360,Math.max(0,t.h)),s:Math.min(100,Math.max(0,t.s)),b:Math.min(100,Math.max(0,t.b))}},L=function(t){return{r:Math.min(255,Math.max(0,t.r)),g:Math.min(255,Math.max(0,t.g)),b:Math.min(255,Math.max(0,t.b))}},P=function(t){var i=6-t.length;if(i>0){for(var c=[],e=0;i>e;e++)c.push("0");c.push(t),t=c.join("")}return t},z=function(){var i=t(this).parent(),c=i.data("colpick").origColor;i.data("colpick").color=c,l(c,i.get(0)),d(c,i.get(0)),n(c,i.get(0)),s(c,i.get(0)),p(c,i.get(0)),u(c,i.get(0))};return{init:function(a){if(a=t.extend({},c,a||{}),"string"==typeof a.color)a.color=e(a.color);else if(void 0!=a.color.r&&void 0!=a.color.g&&void 0!=a.color.b)a.color=o(a.color);else{if(void 0==a.color.h||void 0==a.color.s||void 0==a.color.b)return this;a.color=D(a.color)}return this.each(function(){if(!t(this).data("colpickId")){var c=t.extend({},a);c.origColor=a.color;var e="collorpicker-"+parseInt(1e3*Math.random());t(this).data("colpickId",e);var o=t(i).attr("id",e);o.addClass("colpick-"+c.layout+(c.submit?"":" colpick-"+c.layout+"-ns")),"light"!=c.colorScheme&&o.addClass("colpick-"+c.colorScheme),o.find("div.colpick-submit").html(c.submitText).click(q),c.fields=o.find("input").change(h).blur(v).focus(k),o.find("div.colpick-field-arrs").mousedown(g).end().find("div.colpick-current-color").click(z),c.selector=o.find("div.colpick-color").mousedown(y),c.selectorIndic=c.selector.find("div.colpick-selector-outer"),c.el=this,c.hue=o.find("div.colpick-hue-arrs"),huebar=c.hue.parent();var r=navigator.userAgent.toLowerCase(),m="Microsoft Internet Explorer"===navigator.appName,b=m?parseFloat(r.match(/msie ([0-9]{1,}[\.0-9]{0,})/)[1]):0,x=m&&10>b,M=["#ff0000","#ff0080","#ff00ff","#8000ff","#0000ff","#0080ff","#00ffff","#00ff80","#00ff00","#80ff00","#ffff00","#ff8000","#ff0000"];if(x){var C,I;for(C=0;11>=C;C++)I=t("<div></div>").attr("style","height:8.333333%; filter:progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr="+M[C]+", endColorstr="+M[C+1]+'); -ms-filter: "progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr='+M[C]+", endColorstr="+M[C+1]+')";'),huebar.append(I)}else stopList=M.join(","),huebar.attr("style","background:-webkit-linear-gradient(top center,"+stopList+"); background:-moz-linear-gradient(top center,"+stopList+"); background:linear-gradient(to bottom,"+stopList+"); "),huebar.css({background:"linear-gradient(to bottom,"+stopList+")"}),huebar.css({background:"-moz-linear-gradient(top,"+stopList+")"});o.find("div.colpick-hue").mousedown(w),c.newColor=o.find("div.colpick-new-color"),c.currentColor=o.find("div.colpick-current-color"),o.data("colpick",c),l(c.color,o.get(0)),n(c.color,o.get(0)),d(c.color,o.get(0)),p(c.color,o.get(0)),s(c.color,o.get(0)),f(c.color,o.get(0)),u(c.color,o.get(0)),c.flat?(o.appendTo(this).show(),o.css({position:"relative",display:"block"})):(o.appendTo(document.body),t(this).on(c.showEvent,S),o.css({position:"absolute"}))}})},showPicker:function(){return this.each(function(){t(this).data("colpickId")&&S.apply(this)})},hidePicker:function(){return this.each(function(){t(this).data("colpickId")&&t("#"+t(this).data("colpickId")).hide()})},setColor:function(i,c){if(c="undefined"==typeof c?1:c,"string"==typeof i)i=e(i);else if(void 0!=i.r&&void 0!=i.g&&void 0!=i.b)i=o(i);else{if(void 0==i.h||void 0==i.s||void 0==i.b)return this;i=D(i)}return this.each(function(){if(t(this).data("colpickId")){var e=t("#"+t(this).data("colpickId"));e.data("colpick").color=i,e.data("colpick").origColor=i,l(i,e.get(0)),n(i,e.get(0)),d(i,e.get(0)),p(i,e.get(0)),s(i,e.get(0)),u(i,e.get(0)),e.data("colpick").onChange.apply(e.parent(),[i,r(i),a(i),e.data("colpick").el,1]),c&&f(i,e.get(0))}})}}}(),c=function(t){var t=parseInt(t.indexOf("#")>-1?t.substring(1):t,16);return{r:t>>16,g:(65280&t)>>8,b:255&t}},e=function(t){return o(c(t))},o=function(t){var i={h:0,s:0,b:0},c=Math.min(t.r,t.g,t.b),e=Math.max(t.r,t.g,t.b),o=e-c;return i.b=e,i.s=0!=e?255*o/e:0,i.h=0!=i.s?t.r==e?(t.g-t.b)/o:t.g==e?2+(t.b-t.r)/o:4+(t.r-t.g)/o:-1,i.h*=60,i.h<0&&(i.h+=360),i.s*=100/255,i.b*=100/255,i},a=function(t){var i={},c=t.h,e=255*t.s/100,o=255*t.b/100;if(0==e)i.r=i.g=i.b=o;else{var a=o,l=(255-e)*o/255,r=(a-l)*(c%60)/60;360==c&&(c=0),60>c?(i.r=a,i.b=l,i.g=l+r):120>c?(i.g=a,i.b=l,i.r=a-r):180>c?(i.g=a,i.r=l,i.b=l+r):240>c?(i.b=a,i.r=l,i.g=a-r):300>c?(i.b=a,i.g=l,i.r=l+r):360>c?(i.r=a,i.g=l,i.b=a-r):(i.r=0,i.g=0,i.b=0)}return{r:Math.round(i.r),g:Math.round(i.g),b:Math.round(i.b)}},l=function(i){var c=[i.r.toString(16),i.g.toString(16),i.b.toString(16)];return t.each(c,function(t,i){1==i.length&&(c[t]="0"+i)}),c.join("")},r=function(t){return l(a(t))};t.fn.extend({colpick:i.init,colpickHide:i.hidePicker,colpickShow:i.showPicker,colpickSetColor:i.setColor}),t.extend({colpickRgbToHex:l,colpickRgbToHsb:o,colpickHsbToHex:r,colpickHsbToRgb:a,colpickHexToHsb:e,colpickHexToRgb:c})}(jQuery),function(){$(function(){var t,i,c,e,o,a,l,r,n,d,s,p,f,u,h,v,k,g,m,b,w,x,M,y,C,I,q,S,H;return n=$(".previews li"),$(".widget").colpick({flat:!0,layout:"hex",submit:0,color:"C52D2F",onChange:function(t,i,c){return console.log(t,c,i),y(t,c,i)}}),y=function(t,i,c){n.css("background-color","#"+c),x(i),I(i),M(i),C(i),b(i),q(t),S(i),m(i),w(i)},e=n.filter(".arithmetic"),s=function(t){return(t.r+t.g+t.b)/3},x=function(t){var i;return i=s(t)>=127.5?"black":"white",e.css("color",i)},l=n.filter(".geometric"),u=function(t){return Math.pow(t.r*t.g*t.b,1/3)},I=function(t){var i;return i=u(t)>=127.5?"black":"white",l.css("color",i)},o=n.filter(".brightest"),p=function(t){return Math.max(t.r,t.g,t.b)},M=function(t){var i;return i=p(t)>=127.5?"black":"white",o.css("color",i)},a=n.filter(".darkest"),f=function(t){return Math.min(t.r,t.g,t.b)},C=function(t){var i;return i=f(t)>=127.5?"black":"white",a.css("color",i)},i=n.filter(".3D-distance"),v=function(t){return Math.sqrt(Math.pow(t.r,2)+Math.pow(t.g,2)+Math.pow(t.b,2))},b=function(t){var c;return c=v(t)>=Math.sqrt(3*Math.pow(255,2))/2?"black":"white",i.css("color",c)},r=n.filter(".HSL"),h=function(t){return(200-t.s)*t.b/200},q=function(t){var i;return i=h(t)>=50?"black":"white",r.css("color",i)},d=n.filter(".W3C"),H=function(t){return(299*t.r+587*t.g+117*t.b)/1e3},S=function(t){var i;return i=H(t)>=127.5?"black":"white",d.css("color",i)},t=n.filter(".2D-weighted"),g=function(t){return(212.6*t.r+715.2*t.g+72.2*t.b)/1e3},m=function(i){var c;return c=g(i)>=127.5?"black":"white",t.css("color",c)},c=n.filter(".3D-weighted"),k=function(t){return Math.sqrt(.299*Math.pow(t.r,2)+.587*Math.pow(t.g,2)+.114*Math.pow(t.b,2))},w=function(t){var i;return i=k(t)>=127.5?"black":"white",c.css("color",i)},y({h:359.21,s:77.15,b:77.25},{r:197,g:45,b:47},"C52D2F")})}.call(this);